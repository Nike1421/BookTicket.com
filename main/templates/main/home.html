{% extends "main/base.html" %}
{% load static %}
{% block content %}


<div class="top-level-cont">
    <div class="carousel-float">
        <div id="carousel" class="carousel slide p-lg-2" data-ride="carousel">
            <div class="carousel-inner w-100">
                {% for m in movie_range %}

                {% if forloop.counter == 1 %}
                <div class="carousel-item active">
                    {% else %}
                    <div class="carousel-item">
                        {% endif %}
                        <a href="{% url 'movies-dash' pk=m.id%}"><img class="d-block w-100" src="{{m.poster_h.url}}"
                                width=100% height=400px alt="First slide"></a>
                    </div>
                    {% endfor %}
                </div>

                <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>

            </div>
        </div>
        <div class="card-container p-lg-2">
            <div class="your-bookings card p-lg-4">
                <p>Your Bookings</p>
                <ul>
                    {% if user.is_authenticated %}
                    {% for book in bookings %}
                    <li>
                        <p>{{book.movie}}<br>{{book.show.date|date:"M d, Y"}} {{book.show.time}}</p>
                    </li>
                    {% empty %}
                    <li>
                        <p>No Bookings Available</p>
                    </li>

                    {% endfor %}
                    {% else %}
                    <li>
                        <a href="/accounts/login">
                            <p>Please Login to see your bookings</p>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>

</div>

<div class="section-header m-lg-2">
    <h2>Now Airing...</h2>
</div>
<div class="p-lg-2">
    <ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="action-tab" data-toggle="tab" href="#action_movies" role="tab"
                aria-controls="action_tab" aria-selected="true">Action</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="horror-tab" data-toggle="tab" href="#horror-movies" role="tab"
                aria-controls="profile" aria-selected="false">Horror</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#romance-movies" role="tab"
                aria-controls="contact" aria-selected="false">Romance</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#comedy-movies" role="tab"
                aria-controls="contact" aria-selected="false">Comedy</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#docu-movies" role="tab"
                aria-controls="contact" aria-selected="false">Biography</a>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active " id="action_movies" role="tabpanel" aria-labelledby="action-tab">
            <div class="row">
                {% for m in movie %}
                {% if m.genre_1 == "Action" %}
                <div class="col-md-4-card col-md-4 p-lg-4">
                    <div class="card mx-auto" style="width: 12rem;">
                        <a href="{% url 'movies-dash' pk=m.id%}">
                            <img class="card-img-top" src="{{m.poster_v.url}}" alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{m.title}}</h5>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="tab-pane fade" id="horror-movies" role="tabpanel" aria-labelledby="horror-tab">
            <div class="row">
                {% for m in movie %}
                {% if m.genre_1 == "Horror" %}
                <div class="col-md-4-card col-md-4 p-lg-4">
                    <div class="card mx-auto" style="width: 12rem;">
                        <a href="{% url 'movies-dash' pk=m.id%}">
                            <img class="card-img-top" src="{{m.poster_v.url}}" alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{m.title}}</h5>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="tab-pane fade" id="romance-movies" role="tabpanel" aria-labelledby="romance-tab">
            <div class="row">
                {% for m in movie %}
                {% if m.genre_1 == "Romance" %}
                <div class="col-md-4-card col-md-4 p-lg-4">
                    <div class="card mx-auto" style="width: 12rem;">
                        <a href="{% url 'movies-dash' pk=m.id%}">
                            <img class="card-img-top" src="{{m.poster_v.url}}" alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{m.title}}</h5>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="tab-pane fade" id="comedy-movies" role="tabpanel" aria-labelledby="comedy-tab">
            <div class="row">
                {% for m in movie %}
                {% if m.genre_1 == "Comedy" %}
                <div class="col-md-4-card col-md-4 p-lg-4">
                    <div class="card mx-auto" style="width: 12rem;">
                        <a href="{% url 'movies-dash' pk=m.id%}">
                            <img class="card-img-top" src="{{m.poster_v.url}}" alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{m.title}}</h5>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="tab-pane fade" id="docu-movies" role="tabpanel" aria-labelledby="documentary-tab">
            <div class="row">
                {% for m in movie %}
                {% if m.genre_1 == "Biography" %}
                <div class="col-md-4-card col-md-4 p-lg-4">
                    <div class="card mx-auto" style="width: 12rem;">
                        <a href="{% url 'movies-dash' pk=m.id%}">
                            <img class="card-img-top" src="{{m.poster_v.url}}" alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{m.title}}</h5>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock %}